

#include "font.h"

#include "types.h"

uint8_t test_arr[] = {
	    // ASCII: 122, char width: 9
    0x00, 0x00,  // ---------.......
    0x00, 0x00,  // ---------.......
    0x00, 0x00,  // ---------.......
    0x00, 0x00,  // ---------.......
    0x7f, 0x00,  // -OOOOOOO-.......
    0x02, 0x00,  // ------O--.......
    0x04, 0x00,  // -----O---.......
    0x0c, 0x00,  // ----OO---.......
    0x18, 0x00,  // ---OO----.......
    0x30, 0x00,  // --OO-----.......
    0x20, 0x00,  // --O------.......
    0x7f, 0x00,  // -OOOOOOO-.......
    0x00, 0x00,  // ---------.......
    0x00, 0x00,  // ---------.......
    0x00, 0x00,  // ---------.......
};

int _ugui_font_get_glyph(font_style_t *font, char c, ugui_sprite_t* glyph) 
{
	//Calculate font index
	uint16_t index = c - font->first_ascii_code;

	//Check index is within bounds for the style
	if(index >= font->glyph_count) {
		return 0;
	}

	//Calculate character offset in memory
	//TODO: either make this more efficient or remove and use only fixed width
	uint16_t offset = index * font->glyph_height * font->glyph_width_bytes;

	glyph->w = 16;
	glyph->h = 15;
	glyph->data = (ugui_pixel_t*)test_arr;

	return 1;
}

